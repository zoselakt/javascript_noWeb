<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>async, await</title>
</head>
<body>
	<script type="text/javascript">
		// async/await: 비동기, 비차단 기능이 일반 동기 기능과 유사한방식으로 구조화되도록 하는 프로그래밍 언어의 구문기능구현
		//async: Async객체를 반환하는 비동기 함수

		async funtion getName(){
			throw new Error("err...");
		}
		getName().catch((err) => {
			console.log(err);
		})

		//await: promise를 기다리기 위해 사용 / async function내부에서만 사용가능

		function getName(name){
			return new Promise((resolve, reject) =>{
				setTimeout(() => {
					resolve(name);
				}, 1000);
			});
		};

		async funtion showName(){
			const result = await getName("Mike");
			console.log(result);
		}
		console.log("시작");
		showName();


		const f1 = () => {
			return new Promise((res, rej) => {
				setTimeout(() => {
					res("1번 주문 완료");
				}, 1000);
			});
		};

		const f2 = (message) => {
			console.log(message);
			return new Promise((res, rej) => {
				setTimeout(() => {
					res("2번 주문 완료");
				}, 3000);
			});
		};

		const f3 = (message) => {
			console.log(message);
			return new Promise((res, rej) => {
				setTimeout(() => {
					res("3번 주문 완료");
				}, 2000);
			});
		};

		//async , await 활용

		async funtion order(){
			const result1 = await f1();
			const result1 = await f2(result1);
			const result1 = await f2(result2);
			console.log(result3);
			console.log("종료")
		}

	</script>
</body>
</html>